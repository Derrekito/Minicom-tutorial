{"name":"Minicom-tutorial","tagline":"Minicom tutorial","body":"#Introduction\r\nMinicom is a serial communication program, which we can use with the Dragon12 board. This program is used from console to interface with D-Bug12 and send the text file to the board.\r\n\r\n#Installation\r\nMinicom can be downloaded from [Freecode](http://gcc-hcs12.com/downloads.php) or the following terminal command can be used to download and install the program:\r\n\r\n`sudo apt-get install minicom`\r\n\r\n**CAUTION:** I've seen some potentially fake sites posing as the 'official' Minicom website with untrusted security certificates. It would be best to use your distributions' repository if possible.\r\n\r\n#Configuration\r\nNow that Minicom is installed, the program must be configured properly to interface with the board. To start the configuration process type in the following command and switch:\r\n\r\nminicom -s\r\n\r\nNow the following menu should be displayed:\r\n\r\n<pre>\r\n+-----[configuration]------+\r\n| Filenames and paths      |\r\n| File transfer protocols  |\r\n| Serial port setup        |\r\n| Modem and dialing        |\r\n| Screen and keyboard      |\r\n| Save setup as dfl        |\r\n| Save setup as..          |\r\n| Exit                     |\r\n| Exit from Minicom        |\r\n+--------------------------+\r\n</pre>\r\n\r\nNext, select “Serial port setup” and press to continue. You should be greeted with the following screen:\r\n\r\n<pre>\r\n+-----------------------------------------------------------------------+\r\n| A -    Serial Device      : /dev/ttyUSB0                              |\r\n| B - Lockfile Location     : /var/lock                                 |\r\n| C -   Callin Program      :                                           |\r\n| D -  Callout Program      :                                           |\r\n| E -    Bps/Par/Bits       : 9600 8N1                                  |\r\n| F - Hardware Flow Control : No                                        |\r\n| G - Software Flow Control : Yes                                       |\r\n|                                                                       |\r\n|    Change which setting?                                              |\r\n+-----------------------------------------------------------------------+\r\n| Screen and keyboard      |\r\n| Save setup as dfl        |\r\n| Save setup as..          |\r\n| Exit                     |\r\n| Exit from Minicom        |\r\n+--------------------------+\r\n</pre>\r\n\r\nTo edit the selected Serial Device:\r\n\r\n* Press the *'A'* key\r\n* *Backspace* and edit\r\n* press *Enter*\r\n\r\nTo edit Flow Control:\r\n\r\n* Press the *'F'* key to toggle Yes or No. Set this to **No**.\r\n* Press the *'G'* key to toggle Yes or No. Set this to **Yes**.\r\n\r\nTo edit the baud rate and related settings press the *'E'* key.You should be presented with the following:\r\n\r\n<pre>\r\n+-----------------+---------[Comm Parameters]----------+----------------+ \r\n| A -    Serial De|                                    |                | \r\n| B - Lockfile Loc|     Current:  9600 8N1             |                | \r\n| C -   Callin Pro| Speed            Parity      Data  |                | \r\n| D -  Callout Pro| A:         L: None     S: 5  |                | \r\n| E -    Bps/Par/B| B:         M: Even     T: 6  |                | \r\n| F - Hardware Flo| C:   9600        N: Odd      U: 7  |                | \r\n| G - Software Flo| D:  38400        O: Mark     V: 8  |                | \r\n|                 | E: 115200        P: Space          |                | \r\n|    Change which |                                    |                | \r\n+-----------------| Stopbits                           |----------------+ \r\n        | Screen a| W: 1             Q: 8-N-1          | \r\n        | Save set| X: 2             R: 7-E-1          | \r\n        | Save set|                                    | \r\n        | Exit    |                                    | \r\n        | Exit fro| Choice, or  to exit?        | \r\n        +---------+------------------------------------+ \r\n</pre>\r\n\r\n* Press the *'C'* key for a baud rate of 9600bps\r\n* Press the *'Q'* key for Data=8bits, Parity=none, and Stopbits=1 (8N1), these settings are required for the Dragon12 Board.\r\n\r\nAfter the settings are set up correctly, press Enter to continue. When the configuration is complete you should be presented with the original screen. Selected **Save setup as dfl** (save setup as default) then select **Exit from Minicom**.\r\n\r\n#Using Minicom\r\n\r\nType `minicom` in a terminal to run Minicom. The following sequence should appear:\r\n\r\n<center>\r\n <pre>\r\n+-----------------------+\r\n|                       |\r\n|  Initializing Modem   |\r\n|                       |\r\n+-----------------------+\r\n</pre>\r\n</center>\r\n\r\nfollowed by something similar to the following:\r\n\r\n<pre>\r\nWelcome to minicom 2.3 \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\nOPTIONS: I18n \t\t\t\t\t\t\t\t\t\t\t\r\nCompiled on Oct 24 2008, 06:47:12. \t\t\t\t\t\t\t\t\r\nPort /dev/ttyUSB0 \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                 Press CTRL-A Z for help on special keys \r\n</pre>\r\n\t\t\t\t\r\nMinicom is now 'listening' to the serial port (/dev/ttyUSB0 is the serial device is in this example). Once the Dragon12 is connected to the serial port, press the “reset” button on the board. Note that it is unimportant if the device was connected before or after configuration. You should receive the following D-Bug12 prompt:\r\n\r\n<pre>\r\nWelcome to minicom 2.3 \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\nOPTIONS: I18n \t\t\t\t\t\t\t\t\t\t\t\r\nCompiled on Oct 24 2008, 06:47:12. \t\t\t\t\t\t\t\t\r\nPort /dev/ttyUSB0 \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                 Press CTRL-A Z for help on special keys \t\t\t\t\r\n                                                     \t\t\t\t\t\r\n                                                     \t\t\t\t\t\r\n                                                     \t\t\t\t\t\r\nD-Bug12 4.0.0b32                                     \t\t\t\t\t\r\nCopyright 1996 - 2005 Freescale Semiconductor \t\t\t\t\t\t\r\nFor Commands type \"Help\" \t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n> \t\r\n</pre>\r\n\t\t\t\t\t\t\t\t\r\n# Transferring Text (ASCII) Files\r\n\r\nTo transfer a text file to the Dragon12 board, type in `load` in D-Bug12. Then press *Ctrl+A* and press the *S* key for “upload”. Thus far you should see:\r\n\r\n<pre>\r\nWelcome to minicom 2.3 \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\nOPTIONS: I18n \t\t\t\t\t\t\t\t\t\t\t\r\nCompiled on Oct 24 2008, 06:47:12. \t\t\t\t\t\t\t\t\r\nPort /dev/ttyUSB0 \t\t\t\t\t\t\t\t\t\t\r\n                             +-[Upload]--+ \t\t\t\t\t\t\r\n                 Press CTRL-A| zmodem    |n special keys \t\t\t\t\r\n                             | ymodem    |           \t\t\t\t\t\r\n                             | xmodem    |           \t\t\t\t\t\r\n                             | kermit    |           \t\t\t\t\t\r\nD-Bug12 4.0.0b32             | ascii     |           \t\t\t\t\t\r\nCopyright 1996 - 2005 Freesca+-----------+tor \t\t\t\t\t\t\r\nFor Commands type \"Help\" \t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n>load \t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n CTRL-A Z for help |  9600 8N1 | NOR | Minicom 2.3    | VT102 |\tOffline \r\n</pre>\r\n\t\r\nSelect 'ascii' and press Enter. Minicom will now display a text based folder navigation, for example:\r\n\r\n<pre>\r\nWe+------------------------[Select a file for upload]-------------------------+\r\n  |Directory: /home/user-name                                                 |\r\nOP| [..]                                                                      |\r\nCo| [.folder]                                                                 |\r\nPo| [.amarok-nightly]                                                         |\r\n  | [.cache]                                                                  |\r\n  | [.compiz]                                                                 |\r\n  | [.config]                                                                 |\r\nD-| [.dbus]                                                                   |\r\nCo| [.dvdcss]                                                                 |\r\nFo| [.dvdrip]                                                                 |\r\n  | [.eclipse]                                                                |\r\n>l| [.emerald]                                                                |\r\n  | [.fontconfig]                                                             |\r\n  |              ( Escape to exit, Space to tag )                             |\r\n  +---------------------------------------------------------------------------+\r\n                                                                                \r\n                 [Goto]  [Prev]  [Show]   [Tag]  [Untag] [Okay]                 \r\n                                                                                \r\n CTRL-A Z for help |  9600 8N1 | NOR | Minicom 2.3    | VT102 |      Offline    \r\n</pre>\r\n\r\nNote: Directories preceded with a period are “hidden” folders and should appear before all non-hidden folders.\r\n\r\n## Navigation Keys:\r\n\r\nUse the Up and Down arrows to select a file or directory Press the space-bar key twice to enter a directory or to select a file Select the “[..]” located at the top to enter a higher directory or previous directory. After selecting a file (.s1 record file) for upload press Enter to transfer. After a successful transfer has been completed, the following should be displayed in terminal:\r\n\r\n<pre>\r\nWelcome to minicom 2.3                                                         \r\n                                                                               \r\nOPTIONS: I18n                                                                  \r\nCompiled on Oct 24 2008, 06:47:12.                                             \r\nPort /dev/ttyUSB0                                                              \r\n         +------------[ascii upload - Press CTRL-C to quit]------------+       \r\n         |ASCII upload of \"labx_hcs12.abs.s1\"                          |       \r\n         |Line delay: 2 ms, character delay 1 ms                       |       \r\n         |                                                             |       \r\n         |0.7 Kbytes transferred at 754 CPS... Done.                   |       \r\nD-Bug12 4|                                                             |       \r\nCopyright| READY: press any key to continue...                         |       \r\nFor Comma|                                                             |       \r\n         +-------------------------------------------------------------+       \r\n>load                                                                          \r\n                                                                               \r\n>                                                                              \r\n>load                                                                          \r\n                                                                               \r\n                                                                               \r\n                                                                               \r\n                                                                               \r\n CTRL-A Z for help |  9600 8N1 | NOR | Minicom 2.3    | VT102 |      Offline   \r\n</pre>\r\n\r\nAfter following the prompted instruction to continue, use the appropriate D-Bug12 instruction to run the transferred .s1 record.\r\n\r\n## Uncommon Issues\r\n\r\nIf file transfer fails or hangs, some additional tweaks in Minicom may be needed. Sometimes the serial devices do not talk to each other nicely resulting in one being overloaded by the other. The final remedy may require some trial and error on your part. To start off type in:\r\n\r\n`minicom -s`\r\n\r\nSelect “File transfer protocols” and now the following should be displayed:\r\n\r\n<pre>\r\n+------------------------------------------------------------------------------+\r\n|     Name             Program                 Name U/D FullScr IO-Red. Multi  |\r\n| A  zmodem     /usr/bin/sz -vv -b              Y    U    N       Y       Y    |\r\n| B  ymodem     /usr/bin/sb -vv                 Y    U    N       Y       Y    |\r\n| C  xmodem     /usr/bin/sx -vv                 Y    U    N       Y       N    |\r\n| D  zmodem     /usr/bin/rz -vv -b -E           N    D    N       Y       Y    |\r\n| E  ymodem     /usr/bin/rb -vv                 N    D    N       Y       Y    |\r\n| F  xmodem     /usr/bin/rx -vv                 Y    D    N       Y       N    |\r\n| G  kermit     /usr/bin/kermit -i -l %l -s     Y    U    Y       N       N    |\r\n| H  kermit     /usr/bin/kermit -i -l %l -r     N    D    Y       N       N    |\r\n| I  ascii      /usr/bin/ascii-xfr -dsv -c 1 -l Y    U    N       Y       N    |\r\n| J    -                                                                       |\r\n| K    -                                                                       |\r\n| L    -                                                                       |\r\n| M  Zmodem download string activates... D                                     |\r\n| N  Use filename selection window...... Yes                                   |\r\n| O  Prompt for download directory...... No                                    |\r\n|                                                                              |\r\n|   Change which setting? (SPACE to delete)                                    |\r\n+------------------------------------------------------------------------------+\r\n</pre>\r\n\r\nAt this point we will only be interested in the “ascii” section which uses the program “ascii-xfr”. To edit this section press the “I” key which corresponds to the row ASCII is in. Now, a courser should appear next to ASCII, however we do not want to edit the “name” column, so press Enter to continue onto the “Program” column. Now here is the tricky part, by changing some switches for ascii-xfr we can have our transfer create a delay after every character or line is transferred, among other things we will not worry about here. Below contains a list of switches for Ascii-xfr:\r\n\r\n<pre>\r\nUsage: ascii-xfr -s|-r [-dvn] [-l linedelay] [-c character delay] filename \t\r\n       -s:  send \t\t\t\t\t\t\t\t\t\t\t\r\n       -r:  receive \t\t\t\t\t\t\t\t\t\t\r\n       -e:  send the End Of File character (default is not to) \t\t\t\r\n       -d:  set End Of File character to Control-D (instead of Control-Z)\t\r\n       -v:  verbose (statistics on stderr output) \t\t\t\t\t\r\n       -n:  do not translate CRLF <--> LF \t\t\t\t\t\t\r\n       Delays are in milliseconds. \t\t\r\n</pre>\r\n\t\t\t\t\t\t\r\nThe usage list can be generated by typing `ascii-xfr` in a terminal session. In the above example there is a character delay of one millisecond (i.e. *-c 1*) and a line delay of one millisecond (i.e. *-l 1*). After the desired settings are inputted, press enter to move onto the next column, and repeat until the previous menu is displayed. Remember to select **Save setup as dfl** prior to exiting and using the new settings. Play with these values to suit your situation. If this does not remedy your problem, it may be something entirely unrelated. As a reminder you can always refer back to the Serial in Linux Tutorial.\r\n\r\n# Misc. Resources\r\n\r\nFor further information on minicom please refer to its manual from [Linux.die.net](http://linux.die.net/man/1/minicom) or by typing `man minicom` in a terminal. If you would like to try out the C compiler for the HCS12 in Linux refer to [GCC-HCS12](http://gcc-hcs12.com/downloads.php). Are you still having difficulties installing or configuring minicom in Ubuntu or Debian? Try referring to the [Debian MINICOM Install HOWTO](http://bugcommunity.com/wiki/index.php/Ubuntu/Debian_Serial_Terminal).\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}